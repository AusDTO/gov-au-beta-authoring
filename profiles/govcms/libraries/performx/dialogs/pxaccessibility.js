Array.prototype.filter||(Array.prototype.filter=function(p,e){if(!this)throw new TypeError;var m=Object(this);if("function"!==typeof p)throw new TypeError;var k=[],g;for(g in m)m.hasOwnProperty(g)&&p.call(e,m[g],g,m)&&k.push(m[g]);return k});
Array.prototype.indexOf||(Array.prototype.indexOf=function(p){if(null==this)throw new TypeError;var e,m=Object(this),k=m.length>>>0;if(0===k)return-1;e=0;1<arguments.length&&(e=Number(arguments[1]),e!=e?e=0:0!=e&&Infinity!=e&&-Infinity!=e&&(e=(0<e||-1)*Math.floor(Math.abs(e))));if(e>=k)return-1;for(e=0<=e?e:Math.max(k-Math.abs(e),0);e<k;e++)if(e in m&&m[e]===p)return e;return-1});
Array.prototype.map||(Array.prototype.map=function(p,e){var m,k,g;if(null==this)throw new TypeError(" this is null or not defined");var q=Object(this),t=q.length>>>0;if("function"!==typeof p)throw new TypeError(p+" is not a function");e&&(m=e);k=Array(t);for(g=0;g<t;){var s;g in q&&(s=q[g],s=p.call(m,s,g,q),k[g]=s);g++}return k});String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/gm,"")});
(function(){function p(c,b){if(c.type==CKEDITOR.NODE_ELEMENT){b.push(c);for(var a=c.getChildren(),d=0;d<a.count();d++){var e=a.getItem(d);p(e,b)}}}function e(){this.name="";this.type=-1;this.code=this.solution=this.description=""}function m(c){c=c.filter(function(a){if("img"==a.getName().toLowerCase())return!0});for(var b=[],a=0;a<c.length;a++){var d=!1;"a"==c[a].getParent().getName()&&(d=!0);c[a].hasAttribute("alt")?""==c[a].getAttribute("alt")&&(d?b.addIssue(h.emptyAltLinkedImage,c[a].getOuterHtml()):
b.addIssue(h.emptyAltUnlinkImage,c[a].getOuterHtml())):d?b.addIssue(h.noAltLinkedImage,c[a].getOuterHtml()):b.addIssue(h.noAltUnlinkImage,c[a].getOuterHtml())}return b}function k(c){c=c.filter(function(a){if("table"==a.getName().toLowerCase())return!0});for(var b=[],a=0;a<c.length;a++){var d=c[a],e=[];p(d,e);var n=e.map(function(a){return a.getName().toLowerCase()}),f=!0;0>n.indexOf("th")&&(f=!1,b.addIssue(h.noTh,d.getOuterHtml()));var l;l=d.hasAttribute("summary");n=n.indexOf("caption");!l&&0>n&&
b.addIssue(h.noCaptionOrSummary,d.getOuterHtml());l&&""==d.getAttribute("summary")&&b.addIssue(h.emptySummary,d.getOuterHtml());-1<n&&""==e[n].getText().trim()&&b.addIssue(h.emptyCaption,d.getOuterHtml());l&&-1<n&&d.getAttribute("summary").toLowerCase()==e[n].getText().trim().toLowerCase()&&""!=d.getAttribute("summary")&&b.addIssue(h.duplicateCaptionAndSummary,d.getOuterHtml());if(f){l=e.filter(function(a){if("th"==a.getName().toLowerCase())return!0});var g=e.filter(function(a){if(a.hasAttribute("rowspan")&&
1<a.getAttribute("rowspan")||a.hasAttribute("colspan")&&1<a.getAttribute("colspan"))return!0}),m=!1;0<g.length&&(m=!0);for(var k=!0,n=!0,q=!1,r=!1,f=0;f<l.length;f++)l[f].hasAttribute("scope")?q=!0:k=!1;for(f=0;f<l.length;f++)l[f].hasAttribute("id")?r=!0:n=!1;if(m){if(r||b.addIssue(h.noId,d.getOuterHtml()),r&&!n&&b.addIssue(h.noIdAll,d.getOuterHtml()),r&&n){k=!0;for(f=0;f<g.length;f++)if("td"==g[f].getName().toLowerCase()&&!g[f].hasAttribute("headers")){k=!1;break}k||b.addIssue(h.noHeaders,d.getOuterHtml())}}else if(q||
r||b.addIssue(h.noScopeOrId,d.getOuterHtml()),q&&!k&&b.addIssue(h.noScopeAll,d.getOuterHtml()),r&&!n&&b.addIssue(h.noIdAll,d.getOuterHtml()),g=["row","col","rowgroup","colgroup"],q&&k)for(f=0;f<l.length;f++)0>g.indexOf(l[f].getAttribute("scope"))&&b.addIssue(h.invalidScopeValue,'<p>scope="'+l[f].getAttribute("scope")+'"</p>'+d.getOuterHtml());if(r&&n){n=[];for(f=0;f<l.length;f++)n.push(l[f].getAttribute("id"));l=[];for(f=0;f<e.length;f++)e[f].hasAttribute("headers")&&(r=e[f].getAttribute("headers"),
l=l.concat(r.split(" ")));for(f=0;f<l.length;f++)0>n.indexOf(l[f])&&b.addIssue(h.invalidHeadersValue,'<p>headers="'+l[f]+'"</p>'+d.getOuterHtml())}}}return b}function g(c){c=c.filter(function(a){if(-1<"h1 h2 h3 h4 h5 h6 h7 h8 h9".split(" ").indexOf(a.getName().toLowerCase()))return!0});for(var b=[],a=0;a<c.length;a++)if(0<a)for(var d=a-1;0<=d;d--){if(1<parseInt(c[a].getName().substring(1))-parseInt(c[d].getName().substring(1))){b.addIssue(h.wrongHeadingLevel,c[a].getOuterHtml());break}if(1==parseInt(c[a].getName().substring(1))-
parseInt(c[d].getName().substring(1)))break}else"h1"!==c[a].getName().toLowerCase()&&"h2"!==c[a].getName().toLowerCase()&&b.addIssue(h.wrongStartHeading,c[a].getOuterHtml());return b}function q(c){c=c.filter(function(a){if("b"==a.getName().toLowerCase())return!0});for(var b=[],a=0;a<c.length;a++)b.addIssue(h.useOfB,"<p>"+c[a].getOuterHtml()+"</p>");return b}function t(c){c=c.filter(function(a){if("i"==a.getName().toLowerCase())return!0});for(var b=[],a=0;a<c.length;a++)b.addIssue(h.useOfI,"<p>"+c[a].getOuterHtml()+
"</p>");return b}function s(c){for(var b=[],a=0;a<c.length;a++)c[a].hasAttribute("id")&&b.push(c[a].getAttribute("id"));c=[];b=b.sort();for(a=0;a<b.length-1;a++)b[a+1]==b[a]&&0>c.indexOf(b[a])&&c.push(b[a]);b=[];for(a=0;a<c.length;a++)b.addIssue(h.duplicateId,'<p>id="'+c[a]+'"</p>');return b}Array.prototype.addIssue=function(c,b){var a=new e;a.name=c.name;a.type=c.type;a.description=c.messageIssue;a.solution=c.messageSolution;a.code=b;this.push(a)};var h={noAltUnlinkImage:{id:1,name:"no alt attribute for unlinked image",
type:1,messageIssue:"The following image does not include alternative text.",messageSolution:"Include an <strong>alt</strong> attribute in the <strong>&lt;img&gt;</strong> tag.<br/>If the image is decorative, leave the <strong>alt</strong> attribute empty.<br/>If the image contains information, provide a description in the <strong>alt</strong> attribute."},noAltLinkedImage:{id:2,name:"no alt attribute for linked image",type:1,messageIssue:"The following linked image does not include alternative text.",
messageSolution:"Include an <strong>alt</strong> attribute in the <strong>&lt;img&gt;</strong> tag.<br/>Provide a description of the link destination in the alt attribute."},emptyAltUnlinkImage:{id:3,name:"empty alt attribute for unlinked image",type:2,messageIssue:"The following image includes empty alternative text.",messageSolution:"If the image is decorative, leave the <strong>alt</strong> attribute empty.<br/>If the image contains information, provide a description in the <strong>alt</strong> attribute."},
emptyAltLinkedImage:{id:4,name:"empty alt attribute for linked image",type:1,messageIssue:"The following linked image includes empty alternative text.",messageSolution:"Provide a description of the link destination in the <strong>alt</strong> attribute."},useOfB:{id:5,name:"b",type:2,messageIssue:"The following text uses a <strong>&lt;b&gt;</strong> tag for bold text, instead of a <strong>&lt;strong&gt;</strong> tag.",messageSolution:"If the bold formatting of the text is meant to convey meaning, change the tag to <strong>&lt;strong&gt;</strong>.<br/>If the bold formatting of the text is a design element only, leave the <strong>&lt;b&gt;</strong> tag."},
useOfI:{id:6,name:"i",type:2,messageIssue:"The following text uses a <strong>&lt;i&gt;</strong> tag for italic text, instead of an <strong>&lt;em&gt;</strong> tag.",messageSolution:"If the italic formatting of the text is meant to convey meaning, change the tag to <strong>&lt;em&gt;</strong>.<br/>If the italic formatting of the text is a design element only, leave the <strong>&lt;i&gt;</strong> tag."},wrongHeadingLevel:{id:7,name:"heading levels",type:1,messageIssue:"The headings are not in correct sequence that conveys document structure.",
messageSolution:"Change the heading tags <strong>&lt;h1&gt;</strong> - <strong>&lt;h6&gt;</strong> so that no levels are skipped."},noTh:{id:8,name:"th",type:1,messageIssue:"The following table does not include <strong>&lt;th&gt;</strong> tags to indicate heading cells.",messageSolution:"Use the <strong>&lt;th&gt;</strong> tag for all cells that contain a column or row header."},noCaptionOrSummary:{id:9,name:"neither caption or summary",type:1,messageIssue:"The following table has neither a caption nor a summary.",
messageSolution:"Make sure that the table includes a <strong>&lt;caption&gt;</strong> element or <strong>summary</strong> attribute. "},emptyCaption:{id:10,name:"caption empty",type:1,messageIssue:"The following table includes an empty caption.",messageSolution:"Provide a brief description of the table in the <strong>&lt;caption&gt;</strong> element."},emptySummary:{id:11,name:"summary empty",type:1,messageIssue:"The following table includes an empty summary.",messageSolution:"Provide a brief description of the table content and structure in the <strong>summary</strong> attribute."},
duplicateCaptionAndSummary:{id:12,name:"caption and summary match",type:1,messageIssue:"The following table uses the same text in both the caption and summary.",messageSolution:"If you use both the <strong>&lt;caption&gt;</strong> element and the <strong>summary</strong> attribute, they must contain different information. Use the <strong>&lt;caption&gt;</strong> element for a brief description of the table. Use the <strong>summary</strong> attribute for a brief description of the table content and structure."},
noScopeOrId:{id:13,name:"neither scope nor id attributes in th of simple table",type:1,messageIssue:"The following table uses neither <strong>scope</strong> or <strong>id</strong> attributes in header cells.",messageSolution:"Make sure to use a <strong>scope</strong> or <strong>id</strong> attribute in each <strong>&lt;th&gt;</strong> element in the table."},noId:{id:14,name:"no id attributes in th of complex table",type:1,messageIssue:"The following table has no <strong>id</strong> attributes in header cells.",
messageSolution:"Make sure to use an <strong>id</strong> attribute in each <strong>&lt;th&gt;</strong> element."},invalidScopeValue:{id:15,name:"scope value empty or invalid",type:1,messageIssue:"The following table includes an empty or invalid scope.",messageSolution:"If you use a <strong>scope</strong> attribute in the <strong>&lt;th&gt;</strong> elements of the table, include one of the following values for the attribute: <strong>row</strong>, <strong>col</strong>, <strong>rowgroup</strong>, <strong>colgroup</strong>."},
duplicateId:{id:16,name:"id attributes not unique",type:1,messageIssue:"This page includes duplicate <strong>id</strong> values.",messageSolution:"Make sure that all <strong>id</strong> values in the page are unique."},invalidHeadersValue:{id:17,name:"headers and id attributes do not match",type:1,messageIssue:"The following table includes <strong>headers</strong> values that do not match any <strong>id</strong> values.",messageSolution:"Make sure that the values for each <strong>headers</strong> attribute match <strong>id</strong> attributes in the same table."},
noIdAll:{id:18,name:"id attribute not on all th elements",type:1,messageIssue:"The following table has <strong>id</strong> attributes on some header cells only.",messageSolution:"If you use <strong>id</strong> attributes in a table, make sure you use them in all <strong>&lt;th&gt;</strong> elements."},noScopeAll:{id:19,name:"scope attribute not on all th elements",type:1,messageIssue:"The following table has <strong>scope</strong> attributes on some header cells only.",messageSolution:"If you use <strong>scope</strong> attributes in a table, make sure you use them in all <strong>&lt;th&gt;</strong> elements."},
noHeaders:{id:20,name:"merged cell has no headers attribute",type:1,messageIssue:"The following table includes a merged/spanning cell that has no <strong>headers</strong> attribute.",messageSolution:"Make sure all merged/spanning cells include a <strong>headers</strong> attribute in the <strong>&lt;td&gt;</strong> element."},wrongStartHeading:{id:21,name:"wrong start heading level",type:2,messageIssue:"Check that the headings are in a correct sequence. The first heading in the edit box is <strong>&lt;h3&gt;</strong> or <strong>&lt;h4&gt;</strong>.",
messageSolution:"Check any headings outside the edit box, and change the heading tags <strong>&lt;h1&gt;</strong> - <strong>&lt;h6&gt;</strong> inside the edit box so that no levels are skipped."},unknown:{id:9999,name:"unknown",type:1,messageIssue:"This is an unknow issue",messageSolution:'Please check with Systemik Solutions <a href="mailto:iml@systemiksolutions.com">iml@systemiksolutions.com</a>'}};CKEDITOR.dialog.add("pxAccessibilityDialog",function(c){return{title:"PerformX OpenAccess \u2013 Accessibility Checker",
minWidth:600,minHeight:400,contents:[{id:"main",elements:[{id:"report",type:"html",html:'<style type="text/css">#report-wrapper {width: 600px;height: 400px;overflow:auto;}#report-wrapper .asb-title {font-size: 16px;color:#840004;font-weight:bold;}#report-wrapper * {white-space:normal;}#report-wrapper .issue-wrapper {background-color: white; margin: 20px 0px 20px 0px;}#report-wrapper p {margin-bottom:10px;}#report-wrapper table {margin-left: 0px;width:90%;}#report-wrapper table caption {text-align:left;font-weight:bold;}#report-wrapper td {border: 1px solid black;padding: 4px;}#report-wrapper th {border: 1px solid black;padding: 4px;font-weight:bold;text-align:left;}#report-wrapper b {font-weight:bold;}#report-wrapper i {font-style:italic;}#report-wrapper .code-wrapper {margin-left:15px;}#report-wrapper h1 {font-weight:bold;font-size:20px;}#report-wrapper h2 {font-weight:bold;font-size:18px;}#report-wrapper h3 {font-weight:bold;font-size:16px;}#report-wrapper h4 {font-weight:bold;font-size:14px;}#report-wrapper h5 {font-weight:bold;font-size:12px;}#report-wrapper h6 {font-weight:bold;font-size:10px;}</style><div id="report-wrapper"></div>'},
{type:"html",html:'<p><a style="color:#840004;" href="javascript:void(0);" id="pxAsbHelpLink">Help</a>&nbsp;&nbsp;&nbsp;&nbsp;<a style="color:#840004;" href="javascript:void(0);" id="pxAsbAboutLink">About</a></p>',onLoad:function(){document.getElementById("pxAsbHelpLink").onclick=function(){window.pxHelpMode=3;c.openDialog("helpDialog")};document.getElementById("pxAsbAboutLink").onclick=function(){c.openDialog("aboutDialog")}}}]}],buttons:[{type:"button",id:"print",label:"Print",title:"Print",onClick:function(){var b;
b='<html><head><title>Accessibility Report</title><style type="text/css">body {font-family: Arial, Helvetica, Tahoma, Verdana, sans-serif;font-size: 12px;font-style: normal;font-variant: normal;font-weight: normal;}.asb-title {font-size: 16px;color:#840004;font-weight:bold;}.issue-wrapper {background-color: white; margin: 20px 0px 20px 0px;}p {margin-bottom:10px;}table {margin-left: 0px;border-collapse: collapse;font-family: Arial, Helvetica, Tahoma, Verdana, sans-serif;font-size: 12px;width:90%;}table caption {text-align:left;font-weight:bold;}td {border: 1px solid black;padding: 4px;}th {border: 1px solid black;padding: 4px;font-weight:bold;text-align:left;}b {font-weight:bold;}i {font-style:italic;}.code-wrapper {margin-left:15px;}h1 {font-weight:bold;font-size:20px;}h2 {font-weight:bold;font-size:18px;}h3 {font-weight:bold;font-size:16px;}h4 {font-weight:bold;font-size:14px;}h5 {font-weight:bold;font-size:12px;}h6 {font-weight:bold;font-size:10px;}</style></head><body>'+
jQuery("#report-wrapper").html();b+="</body></html>";var a=window.open("","_blank");a.document.write(b);a.document.close();a.print();a.close()}},CKEDITOR.dialog.okButton],onShow:function(){var b=[],a="";p(c.document.getBody(),b);var d=[],d=d.concat(m(b)),d=d.concat(k(b)),d=d.concat(g(b)),d=d.concat(q(b)),d=d.concat(t(b)),d=d.concat(s(b));if(0<d.length)for(a='<p class="asb-title">Accessibility Issues</p>',b=0;b<d.length;b++){var e;e=d[b].type;switch(e){case 1:e='<span style="color:#ff0000;font-weight:bold;">[Error]</span>';
break;case 2:e='<span style="color:#ff9900;font-weight:bold;">[Warning]</span>';break;default:e=""}a+='<div class="issue-wrapper"><p>'+(b+1)+". "+e+" "+d[b].description+"</p><p>"+d[b].solution+'</p><div class="code-wrapper">'+d[b].code+"</div></div>"}else a='<p style="font-size:12px;"><img src="'+CKEDITOR.plugins.getPath("performx")+'dialogs/images/tick.png" style="width:50px;" /> No accessibility issue</p>';jQuery("#report-wrapper").html(a)},onOk:function(){}}})})();
