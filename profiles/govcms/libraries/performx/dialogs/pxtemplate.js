(function(){var d;(function(a){a.ajax({async:!1,dataType:"json",url:CKEDITOR.plugins.getPath("performx")+"resources/templates.json",success:function(b){d=b.templates},error:function(b,c,a){console.log("Request Failed: "+(c+", "+a))}})})(jQuery);d.buildSelectList=function(){var a=[];a.push(["Choose a template...",""]);for(var b,c=0;c<this.length;c++)b=[this[c].displayName,this[c].templateValue],a.push(b);return a};d.getTemplateAttribute=function(a,b){for(var c=0;c<this.length;c++)if(this[c].templateValue==
a)return this[c][b];return""};CKEDITOR.dialog.add("pxTemplateDialog",function(a){return{title:"PerformX OpenAccess - Editor Content Templates",minWidth:530,minHeight:480,contents:[{id:"main",elements:[{type:"html",html:"<p>Select a editor content template to see its preview.</p>"},{type:"hbox",width:[null,null],height:450,children:[{type:"vbox",style:"margin-right: 20px;",children:[{id:"templateName",type:"select",label:"Template:",items:d.buildSelectList(),onChange:function(){var b,c,a,e;b=this.getValue();
c=CKEDITOR.plugins.getPath("performx");a=d.getTemplateAttribute(b,"previewImage");e=d.getTemplateAttribute(b,"displayName");b=d.getTemplateAttribute(b,"description");""!=a?(a=c+"images/"+a,jQuery("#template-preview").html('<p style="margin-bottom:10px;white-space:normal;"><span style="font-weight:bold;color:#840004;">'+e+":</span><br/>"+b+'</p><img src="'+a+'" />')):jQuery("#template-preview").html("<p></p>")}},{id:"isOverwrite",type:"checkbox",label:"Overwrite current contents in the editor"}]},
{type:"vbox",children:[{id:"preview",type:"html",html:'<div id="template-preview"></div>'}]}]},{type:"html",html:'<p><a style="color:#840004;" href="javascript:void(0);" id="pxTplHelpLink">Help</a>&nbsp;&nbsp;&nbsp;&nbsp;<a style="color:#840004;" href="javascript:void(0);" id="pxTplAboutLink">About</a></p>',onLoad:function(){document.getElementById("pxTplHelpLink").onclick=function(){window.pxHelpMode=1;a.openDialog("helpDialog")};document.getElementById("pxTplAboutLink").onclick=function(){a.openDialog("aboutDialog")}}}]}],
onShow:function(){jQuery("#template-preview").html("<p></p>")},onOk:function(){var b=this.getValueOf("main","templateName"),c=this.getValueOf("main","isOverwrite"),b=d.getTemplateAttribute(b,"templateHtml");""!=b&&(c?confirm("Are you sure to overwrite the editor contents? All your current contents will be lost.")?a.setData(b):a.insertHtml(b):a.insertHtml(b))}}})})();
